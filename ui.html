<div class="wrapper">
  <button id="create-color-vars">Generate Sass Color Variables</button>
  <button id="create-text-mixins">Generate Sass Text Style Mixins</button>
  <button id="create-spacing-mixins">Generate Sass Spacing Mixins</button>
  <div class="util-buttons-wrapper">
    <button class="back" id="back">Back</button>
    <button class="copy-all" id="copy-all">Copy to clipboard</button>
  </div>
  <div class="content-wrapper" id="content-wrapper"></div>
</div>

<script>
  document.getElementById('create-text-mixins').onclick = () => {
    parent.postMessage({ pluginMessage: { type: 'create-text-mixins' } }, '*')
  }

  document.getElementById('create-color-vars').onclick = () => {
    parent.postMessage({ pluginMessage: { type: 'create-color-vars' } }, '*')
  }

  document.getElementById('create-spacing-mixins').onclick = () => {
    parent.postMessage({ pluginMessage: { type: 'create-spacing-mixins' } }, '*')
  }

  document.getElementById('copy-all').onclick = () => {
    const textElement = document.getElementById('content-wrapper');

    // Create a temporary text area to hold the text to be copied
    const textArea = document.createElement('textarea');
    textArea.value = textElement.innerText; // Get the text content of the element
    document.body.appendChild(textArea);

    // Select the text in the textarea
    textArea.select();

    // Execute the copy command
    document.execCommand('copy');

    // Remove the temporary textarea
    document.body.removeChild(textArea);

    // Update copy button
    document.getElementById('copy-all').innerText = 'Copied!'
  }

  document.getElementById('back').onclick = () => {
    document.getElementById('copy-all').style.display = 'none'
    document.getElementById('back').style.display = 'none'
    document.getElementById('create-text-mixins').style.display = 'block'
    document.getElementById('create-color-vars').style.display = 'block'
    document.getElementById('create-spacing-mixins').style.display = 'block'
    document.getElementById('content-wrapper').innerHTML = ''
  }

  window.onmessage = (event) => {
    const { type, mixins } = event.data.pluginMessage
    if (type === 'mixins-created') {
      document.getElementById('copy-all').style.display = 'block'
      document.getElementById('back').style.display = 'block'
      document.getElementById('create-text-mixins').style.display = 'none'
      document.getElementById('create-color-vars').style.display = 'none'
      document.getElementById('create-spacing-mixins').style.display = 'none'
      document.getElementById('content-wrapper').innerHTML = mixins
    }
  }
</script>

<style>
  .wrapper {
    display: flex;
    flex-direction: column;
    gap: 12px;
    justify-content: center;
    min-height: 100%;
  }

  .wrapper button {
    background-color: rgb(11, 37, 114);
    color: white;
    font-weight: bold;
    border-radius: 6px;
    border: none;
    padding: 12px;
    cursor: pointer;
  }

  .util-buttons-wrapper {
    display: flex;
    gap: 12px;
    margin-top: 16px;
  }

  .back {
    display: none;
  }

  .copy-all {
    display: none;
  }

  .content-wrapper {
    display: flex;
    flex-direction: column;
  }

  .font-styles {
    margin-top: 20px;
  }

  .desktop-font-styles {
    margin-top: 8px;
    padding-left: 16px;
  }

  .mobile-style {
    padding-left: 16px;
  }

  .desktop-style {
    padding-left: 32px;
  }
</style>
